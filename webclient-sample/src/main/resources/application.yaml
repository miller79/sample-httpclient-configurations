spring:
  # OAuth2 client (client_credentials) example. Provide real values via environment
  # variables or a profile-specific YAML during deployment.
  security:
    oauth2:
      client:
        provider:
          serviceAccount:
            issuer-uri: ${ISSUER_URI:https://accounts.google.com}
        registration:
          serviceAccount:
            client-id: ${CLIENT_ID}
            client-secret: ${CLIENT_SECRET}
            authorization-grant-type: client_credentials

  # Reactive HTTP client section (WebClient / Reactor Netty connector)
  http:
    reactiveclient:
      # Choose the Reactor Netty connector (default for reactive clients in this sample)
      connector: reactor
      # Example timeouts (uncomment to enable):
      # connect-timeout: 3m   # Time to establish TCP connection (Reactor Netty optional)
      # read-timeout: 3m      # Maximum time to wait for read data on an established connection

miller79:
  reactor:
    # ‚≠ê BEST PRACTICE: Connection lifecycle settings prevent stale connections
    # These values work for 95% of production applications
    
    max-idle-time: 3m
    # üí° 3-4 minutes is optimal for most apps
    # - Short enough to clean up idle connections regularly
    # - Long enough to benefit from connection pooling
    # - Shorter than typical server/LB timeouts (5-10 min)
    
    max-life-time: 30m
    # üí° 5-30 minutes forces connection rotation
    # - 5-10 min: Dynamic environments (Kubernetes, frequent deploys)
    # - 15-30 min: Stable infrastructure
    # - Ensures DNS changes and LB updates are picked up
    
    # üîë With the above settings, TCP keep-alive is NOT necessary!
    # Only enable keep-alive for special cases:
    # - Long-lived persistent connections (WebSockets, SSE)
    # - Aggressive firewall environments that close connections < 3 min
    
    # Uncomment only if needed:
    # max-connections: 20           # Reactive needs fewer connections than blocking
    # so-keep-alive: true           # Only for special cases (see above)
    # tcp-keep-idle: 30s            # Linux/Epoll only - time before first probe
    # tcp-keep-interval: 10s        # Linux/Epoll only - time between probes
    # tcp-keep-count: 3             # Linux/Epoll only - failed probes before dead
